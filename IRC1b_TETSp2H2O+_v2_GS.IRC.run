#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSp2H2O+_v2_GS.IRC	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='10:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=64        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########


Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        O 2.54039054080501 -0.96026819473297 -0.5123926845753199 
        O 1.80200478068995 -0.25138471283981 1.79153019987327 
        S 1.53981973543139 -0.49037488321207 0.40239703067479 
        N 0.93053406291744 0.944057049135 -0.27237508125338 
        N 0.14407867228201 -1.43980272580681 0.32042539662238 
        N -1.29490501837019 1.13461016006986 0.7387734240785599 
        S -2.05523651650647 0.57324637781174 -0.6662932911643999 
        N -0.83423868674565 -0.16308153624786 -1.49964824014538 
        O -3.05117021447719 -0.37517063427504 -0.26663718731564 
        O -2.43557107419502 1.7536028242369 -1.42982409691214 
        C 0.06245495035795 1.74187813732281 0.57505994425633 
        C -0.47016885836357 -1.51353308401351 -1.02368126437309 
        C -1.94214608508895 1.05958066426519 1.96748370840307 
        C 0.36602728311164 0.71646304075789 -1.60688048866395 
        H 0.5009443209133601 1.8336781807091 1.56490918768461 
        H -0.02055702869261 2.72840312465848 0.11838190033138 
        H 0.19672588500262 -1.92721317138873 -1.78291329198239 
        H -1.36341834458781 -2.12697226287725 -0.95231183722831 
        H -1.23605012644534 1.03643280634288 2.79322422941647 
        H -2.6564823484627 0.24251480961348 2.00543419352554 
        H 0.08487894705978 1.66496714298164 -2.05674557074419 
        H 1.09297036529186 0.21515222404094 -2.23927644139643 
        H 0.33076542245409 -2.35842774706128 0.71938512093315 
        O -2.75191965644863 2.35473563844632 2.20681147489204 
        H -3.26792546693274 2.27902194395402 3.02891528125891 
        O -4.10263450454745 2.9781471578173 0.28983354787954 
        H -3.4508678658661 2.6961374120061 1.27203126330912 
        H -4.30690263227624 3.92100483980712 0.18491178962885 
        H -3.6089472164241 2.65703175065486 -0.51507136870105 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         13 24 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         26 28 1.0
         26 29 1.0
         27 24 1.0
         27 26 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
