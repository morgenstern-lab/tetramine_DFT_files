#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSpOHH3O+_ii_AlliH2O_final_Gibbs	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task SinglePoint
Properties
    NormalModes Yes
End
System
    Atoms
        O 2.4574045439206 -0.5760090247335204 -0.415036502596372 adf.R=1.517
        O 1.681403138238732 0.2844723151730209 1.805952030445304 adf.R=1.517
        S 1.398014866110698 -0.1295444686865701 0.4569361170749497 adf.R=1.792
        N 0.6376249951217892 1.141400806208588 -0.3529775610374459 adf.R=1.608
        N 0.1165913408186198 -1.194576388593373 0.5121999945236797 adf.R=1.608
        N -1.699387460375939 1.455456127779143 0.6154397513367136 adf.R=1.608
        S -2.342369393883242 0.4525516053628139 -0.8079688782372496 adf.R=1.792
        N -0.9969831657996018 -0.24851023282856 -1.422020291049844 adf.R=1.608
        O -3.195809190688293 -0.5330531960764874 -0.2167162590208204 adf.R=1.517
        O -2.795230271500149 1.472106092164087 -1.705352468481887 adf.R=1.517
        C -0.248275869752507 1.991235067724648 0.3955603443922687 adf.R=1.7
        C -0.5113310389925594 -1.490348074968944 -0.7986924390058385 adf.R=1.7
        C -1.971951476732072 0.8282586291636895 1.9957915265306 adf.R=1.7
        C 0.100620385857879 0.7264344355723226 -1.655132732088353 adf.R=1.7
        H 0.1527230981685586 2.192512013310179 1.381685279548428 adf.R=1.35
        H -0.3745300595717953 2.91946308812482 -0.1526999892918842 adf.R=1.35
        H 0.1812138655312446 -1.93375161229975 -1.512425327400819 adf.R=1.35
        H -1.336501011682938 -2.169324520727217 -0.6219661993738982 adf.R=1.35
        H -1.342991248683189 1.385807503312299 2.683630296092598 adf.R=1.35
        H -1.672869865796571 -0.2137312376463636 1.957866095773668 adf.R=1.35
        H -0.2695117356772967 1.595472519280294 -2.18832296367676 adf.R=1.35
        H 0.8651978067972873 0.2353297534189751 -2.245810861736128 adf.R=1.35
        H 0.3642447261548002 -2.038990927385739 1.025609955906434 adf.R=1.35
        O -3.297663640560974 1.028997633308844 2.341441546071446 adf.R=1.517
        H -3.835861866362657 0.3006784668331166 1.99449734579149 adf.R=1.35
        O -2.956089454394882 3.855898593614135 0.5311565031096185 adf.R=1.517
        H -3.519816247050477 4.012579480088993 1.304629906378295 adf.R=1.35
        H -2.293333717205216 2.339108786657477 0.5799734324299186 adf.R=1.35
        H -3.544664681384673 3.975690115618811 -0.2304560973766629 adf.R=1.35
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         6 28 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         13 24 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         26 27 1.0
         26 29 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
    Solvation
        Surf Delley
        Solv name=Water cav0=0.0 cav1=0.0067639
        Charged method=CONJ
        C-Mat POT
        SCF VAR ALL 
        CSMRSP
    End
EndEngine
eor



########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
