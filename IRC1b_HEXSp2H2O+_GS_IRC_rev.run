#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSp2H2O+_GS_IRC_rev	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
IRC
    KeepConvergedResults No
End
System
    Atoms
        H 3.122399213957623 -1.120924055598534 3.134278680570455 
        O 3.161668702313832 -2.062698528401459 3.447115826311896 
        H 3.693531352575835 -2.108018935058311 4.256328613610947 
        H 1.986989683021006 -2.542980990098965 3.480431689074588 
        O 0.9250962122381675 -3.001161003074048 3.363028424562633 
        H 0.5328135803603605 -3.240526307745956 4.220011939023843 
        N -1.807146243809104 -1.191132750167776 -0.1862193870164868 
        C -0.804256536024357 -1.676041944845986 -1.151242603309018 
        N 0.5439204488291696 -1.233610971514315 -0.8057290321601013 
        C 1.176241296246488 -1.7589987267406 0.3780244779459854 
        N 0.6123616819910833 -1.278908590891821 1.676565838701134 
        C -0.0787132530068391 -2.152058098484185 2.505803610576394 
        N -1.323252377289386 1.417735011986477 -0.2783487445631567 
        C -0.4688043647049146 1.87504220020948 -1.381470892046276 
        N 0.9238660584585108 1.445358440738497 -1.195730143328368 
        C 1.45696299351398 1.842384788862745 0.09642098982643241 
        N 0.5842596515321282 1.386532759249448 1.211191759522773 
        C -0.8418728740913775 1.769830491268342 1.044853896487432 
        S -2.532888303223557 0.306307109331059 -0.4990540471588699 
        S 1.340292432189288 -0.08465517244347956 -1.753513325956555 
        S 1.030664644979739 0.2647633754669882 2.27882870163147 
        O -2.890567674327413 0.4039497805153441 -1.887538584934032 
        O -3.47406162742559 0.4603176255922781 0.5737581702396563 
        O 0.772049331719261 -0.1891018266576054 -3.062521456779554 
        O 2.735871462364001 -0.2374878329787209 -1.454105818635281 
        O 0.2544966334270185 0.3994861306075148 3.479138528058695 
        O 2.486117899958226 0.2852272537740359 2.317444082305999 
        H -1.01680893338178 -1.368021370502056 -2.173311787747604 
        H -0.8331911321327147 -2.767097488481302 -1.116653957615567 
        H 2.237732759989088 -1.531311957091637 0.3329527299570482 
        H 1.063384855544992 -2.844738892260944 0.3953853013023841 
        H -0.7056659629481609 -1.64201075324658 3.226462583453837 
        H -0.6089306503516261 -2.915685639862613 1.947599149382832 
        H -0.4659236738412636 2.966947597394 -1.389647423441358 
        H -0.8570792762640048 1.51890903210153 -2.328609325234231 
        H 1.469145560923782 2.932759406634273 0.1303666057052402 
        H 2.465351566084432 1.47156902234576 0.2343673584687343 
        H -0.8831263708321778 2.855257753211407 1.160600268202442 
        H -1.456619119211304 1.316805137643375 1.815514026783363 
        H -2.569141057140822 -1.853106084268732 -0.05669148431641109 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 5 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
