#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HMTpOHH3O+_initial_GibbsGOi	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='24:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task GeometryOptimization
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        N 0.6868051296422105 -0.7775266367571986 -0.8781763392668031 
        N -0.1617427078205209 -0.9815670502232713 1.439474433554345 
        N 1.43512262015108 1.287729971747379 0.2524480452696448 
        N -0.9547226853730251 0.7988370200282752 -0.0979793917950694 
        C 0.4139937006284126 -1.65978645475054 0.2892516369426878 
        C 2.273690314774168 1.764769552957494 1.076784302007667 
        C 1.763407733353415 0.1374820191190278 -0.7143390861018172 
        C -0.54567154302318 -0.05376211819233122 -1.224337545538059 
        C -1.232258882400719 -0.06269813088732976 1.083355991809281 
        C 0.003770107678426413 1.827681124960173 0.1122870143269312 
        H -0.2793130801442838 -2.42159100057743 -0.071501339636992 
        H 1.336977063216873 -2.157676289296868 0.5830547511488962 
        H 3.279709828700736 1.365674686180657 1.127392146824121 
        H 2.000114603914814 2.591525269562462 1.72120157388924 
        H 2.659507032029461 -0.348824995959368 -0.3315418354839014 
        H 1.98467571522814 0.6300173925079202 -1.663045825701538 
        H -1.334946219523529 -0.7728040276257299 -1.433604620627735 
        H -0.3856594770891822 0.5551846674975913 -2.115782305603155 
        H -1.467296667476985 0.5723083264241731 1.936578118627846 
        H -2.1271770297122 -0.6326511637449639 0.8271134355192701 
        H -0.204663789309189 2.403811188041478 1.01278702343895 
        H 0.04027080700021323 2.491442358688442 -0.7536065602965207 
        H 0.5490398654446421 -0.5544514382914872 2.02317307810733 
        O 1.975709195508557 0.4319712237299627 3.328607926394772 
        H 2.656378489548604 -0.008917594652149013 3.854909396600255 
        H -0.8649085260991617 0.008218987517803682 4.906235555351285 
        O -0.3819410947876182 0.8222464694944543 4.702949098271128 
        H -0.4439829286561473 1.354494633672892 5.508931685816528 
        H 1.22126295122593 0.5721538060078479 3.943367689190976 
    End
    Charge 1.0
    BondOrders
         1 5 1.0
         1 7 1.0
         1 8 1.0
         2 5 1.0
         2 9 1.0
         2 23 1.0
         3 6 1.0
         3 7 1.0
         3 10 1.0
         4 8 1.0
         4 9 1.0
         4 10 1.0
         5 11 1.0
         5 12 1.0
         6 13 1.0
         6 14 1.0
         7 15 1.0
         7 16 1.0
         8 17 1.0
         8 18 1.0
         9 19 1.0
         9 20 1.0
         10 21 1.0
         10 22 1.0
         24 25 1.0
         24 29 1.0
         26 27 1.0
         27 28 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
