#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSCNp+_GS_IRC_CO	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
IRC
    KeepConvergedResults No
End
System
    Atoms
        H 3.344252530445597 -1.450399908211066 3.405575289998588 
        O 3.143378051799649 -2.380141001387007 3.223211858086057 
        H 3.917994684750569 -2.873636860832289 3.526471886004472 
        H 1.445646254585769 -3.023820232542028 3.642264975934366 
        O 0.4985036179763316 -3.266290924380579 3.603929695195603 
        H 0.3210522366287751 -3.774990451140757 4.405456540429148 
        N -1.600892748378679 -1.294430557612845 -0.0009422817647295786 
        C -0.6160439555860924 -1.768972044621136 -1.03308536152405 
        N 0.7224662930854437 -1.263765540540883 -0.7916643551266789 
        C 1.373741459984302 -1.617786588815261 0.4506861724414034 
        N 0.5969575584199587 -1.091568385464585 1.605808376553775 
        C -0.5726630774877587 -1.650177692630406 1.835808233972669 
        N -1.358549081930944 1.424304422772931 -0.2648713323403334 
        C -0.5366919112893259 1.798198362547535 -1.435331724673914 
        N 0.8638533817613675 1.442961064311063 -1.225575625255824 
        C 1.409783368182014 1.960494549067334 0.02646380277098476 
        N 0.5530744784592838 1.623188338931397 1.189871712529054 
        C -0.8621866128336073 1.975609812516095 0.9967023108275537 
        S -2.458240273834439 0.221740690615968 -0.3130746274945149 
        S 1.381092201257753 -0.05619372225339504 -1.77593012026026 
        S 0.9662230332489311 0.485266784434376 2.285878013606324 
        O -2.930914422374901 0.1292599463341584 -1.66281084310196 
        O -3.296687299428167 0.3263517560357736 0.8432510517733437 
        O 0.7620283307882015 -0.2331992766002163 -3.053954365615671 
        O 2.790014714181421 -0.09517919653069921 -1.52431127360449 
        O 0.07043046812871477 0.5913857535083209 3.394022923354868 
        O 2.395515053454313 0.4682488326879856 2.378834727192335 
        H -0.9338721695353341 -1.502617725330655 -2.038718630589706 
        H -0.6023520677366494 -2.858618022690374 -0.9580438793831333 
        H 2.385471968951153 -1.23098030754129 0.4786023438525411 
        H 1.410329370667729 -2.70147241650044 0.5720186345040184 
        H -1.246604129479193 -1.197296640358678 2.548763056146139 
        H -0.6726514093429586 -2.704541625277936 1.628846055112342 
        H -0.5969002797790499 2.882298522037643 -1.543515908963293 
        H -0.9230157501710157 1.334882189032047 -2.336006532721274 
        H 1.427037079852348 3.049211825230343 -0.04377934324801827 
        H 2.421356215999638 1.604244707097606 0.1847523109012156 
        H -0.9222071005625955 3.063601036632646 0.9342337280674414 
        H -1.466728424335076 1.64355434874121 1.83342752064225 
        H -2.364291480322961 -1.971719569985826 0.06533959241916423 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 5 1.0
         5 6 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
