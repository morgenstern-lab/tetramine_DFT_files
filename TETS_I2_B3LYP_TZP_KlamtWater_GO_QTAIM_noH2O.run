#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETS_I2_B3LYP_TZP_KlamtWater_GO_QTAIM_noH2O	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='24:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 128 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours
#SBATCH --exclude=c004
#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task GeometryOptimization
Properties
    NormalModes Yes
End
System
    Atoms
        O 2.485140491688384 -0.5843119176920173 -0.3827025927336198 adf.R=1.72
        O 1.673822162166416 0.2667175178160118 1.82817669018116 adf.R=1.72
        S 1.411362872602515 -0.148683546487133 0.4757980644456772 adf.R=2.16
        N 0.649754390388649 1.120730951039096 -0.3419647091633505 adf.R=1.83
        N 0.1367982767770344 -1.225146210878873 0.5139695655743269 adf.R=1.83
        N -1.692318754912998 1.411745609685764 0.6187441961147959 adf.R=1.83
        S -2.316637353366183 0.4146957304906358 -0.8144330447403383 adf.R=2.16
        N -0.9648530889898035 -0.2812589464136999 -1.429346891135313 adf.R=1.83
        O -3.173581238331562 -0.5810167162910103 -0.2455838101498906 adf.R=1.72
        O -2.766914180168422 1.434419651791788 -1.713170365236862 adf.R=1.72
        C -0.2522820082950828 1.964999909948125 0.3957168607966036 adf.R=2.00
        C -0.4759839310234708 -1.520671073413649 -0.8028273115628247 adf.R=2.00
        C -1.946394947945683 0.7689261514513451 2.00078303367508 adf.R=2.00
        C 0.1301125509318022 0.7004769490184531 -1.648809668334903 adf.R=2.00
        H 0.1452082590090094 2.187847273189602 1.379773661640488 adf.R=1.30
        H -0.3858508472490543 2.886330983037643 -0.1642923720126257 adf.R=1.30
        H 0.2249798265922252 -1.959185920184389 -1.51253167921444 adf.R=1.30
        H -1.298235000286159 -2.206661614002559 -0.6352179798997808 adf.R=1.30
        H -1.349068022651028 1.362445236083109 2.688480465923158 adf.R=1.30
        H -1.593090660163697 -0.256079116319721 1.964508981496917 adf.R=1.30
        H -0.2371405011914094 1.566613411298057 -2.1900959277161 adf.R=1.30
        H 0.904744253118809 0.2126932580361839 -2.230552660292438 adf.R=1.30
        H 0.3871647457440706 -2.070986120374568 1.025667171682231 adf.R=1.30
        O -3.279442529508472 0.9021339778843313 2.33890984593747 adf.R=1.72
        H -3.774762282856436 0.1338632089784 2.015354392799404 adf.R=1.30
        H -2.311738922389295 2.280203561812335 0.5920069336449301 adf.R=1.30
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         6 26 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         13 24 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    Save TAPE10
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
    Solvation
        Surf Delley
        Solv name=Water cav0=0.0 cav1=0.0067639
        Charged method=CONJ
        C-Mat POT
        SCF VAR ALL 
        CSMRSP
    End
    QTAIM
        Enabled Yes
        AnalysisLevel Extended
    End
EndEngine
eor

########
#do not change the rest of the file!
########


mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
