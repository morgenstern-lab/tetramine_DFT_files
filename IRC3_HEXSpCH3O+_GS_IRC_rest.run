#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSpCH3O+_GS_IRC_rest	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
Restraints
    Distance 5 6 1.025 0.35 
End
IRC
    KeepConvergedResults No
End
System
    Atoms
        H 3.766571248842402 -2.275407493189889 3.331601097963408 
        O 2.964120623764551 -2.787526362531601 3.155707951521831 
        H 3.071242165762724 -3.613039089315638 3.647466422412073 
        H 1.674619600056342 -1.952704017529366 2.173070128691284 
        O -0.3356470874126511 -2.071681537347917 3.94846180146625 
        H -0.05192538478199368 -1.091651464745993 4.046787187234445 
        N -1.515158011324626 -1.491593861425828 -0.2063051893330202 
        C -0.493256298757297 -1.722523886206694 -1.248945152513979 
        N 0.7749364439120532 -1.098631000678073 -0.9052314523355511 
        C 1.575680436711882 -1.64059388126634 0.1613855993247892 
        N 1.082816077282172 -1.358879305326083 1.561488321481914 
        C -0.9023237549022133 -2.213075021566854 2.834608436485651 
        N -1.34017757422926 1.179990512407983 -0.08868843084902106 
        C -0.6509388980104205 1.827934050371625 -1.21931795079007 
        N 0.7982060586928824 1.602437873932506 -1.162693956713393 
        C 1.376435828442549 1.975373370191664 0.120579222893121 
        N 0.6620640388393703 1.319170485680575 1.247140919595551 
        C -0.7963760585583989 1.542613235501056 1.209668476293589 
        S -2.420527196754199 -0.05271428724018237 -0.2767782645989673 
        S 1.364727587621528 0.1740852210590432 -1.844707985668415 
        S 1.369540172858567 0.2136853597446306 2.193533357336595 
        O -2.990162293665096 0.1129447781327097 -1.584099150197705 
        O -3.206683625747514 -0.1199729084604862 0.9295393967318674 
        O 0.7190258947254501 0.0673082714865622 -3.117724805537371 
        O 2.785523755233182 0.1872725417707942 -1.651996947054444 
        O 0.6112880795050792 0.2045914098939125 3.449132879726891 
        O 2.781828486849792 0.4652715138209966 2.205312831343798 
        H -0.8015305311352966 -1.369098937267232 -2.230969705294977 
        H -0.3561309687414281 -2.804198949724929 -1.307457143284401 
        H 2.600152527995544 -1.293791883932288 0.04359851421991306 
        H 1.573708868656169 -2.730315317644347 0.09764475942579692 
        H -1.349302240458937 -1.387732817757802 2.293624364262049 
        H -1.066076308378629 -3.235005761143175 2.501034050999468 
        H -0.8117599492590297 2.905130113943693 -1.145152090353359 
        H -1.058134943751843 1.478364256706644 -2.161225747045667 
        H 1.249587719091618 3.051645765802753 0.2444427157133946 
        H 2.433371809646494 1.737609630857661 0.1558969283805031 
        H -0.9519349052582414 2.613370611960025 1.36304473423046 
        H -1.300527715846233 1.012766607152883 2.008506697278141 
        H -2.212543938031062 -2.235394930659868 -0.2282415307796195 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 11 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
