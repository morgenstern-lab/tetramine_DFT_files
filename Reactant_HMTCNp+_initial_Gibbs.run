#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HMTCNp+_initial_Gibbs	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task SinglePoint
Properties
    NormalModes Yes
End
System
    Atoms
        N 0.9141885775371662 -0.6830620910571729 -1.006088908228541 
        N 0.426351047423861 -0.1312265037760271 1.30932301460214 
        N 1.067633484142027 1.628702061967545 -0.2426409419934857 
        N -1.112021671762624 0.5520459159145978 -0.4424711862901325 
        C 1.02448232852032 -1.1640647341162 0.343709837617431 
        C 1.182046422497048 1.194876718095713 1.122229378019069 
        C 1.637849023611009 0.5988631808405012 -1.136363207533187 
        C -0.509645997195904 -0.4610602829436377 -1.334182407477761 
        C -1.04067581045273 0.09589327297054895 0.9191609883130059 
        C -0.3585274806469428 1.815619648091141 -0.5817265521150072 
        H 0.4723324167548626 -2.093487009212392 0.4796115150719154 
        H 2.064626507106253 -1.313147408660297 0.6319649578573426 
        H 2.220658970292959 1.015983824291806 1.398719721536592 
        H 0.7414238184765395 1.917431590763334 1.808672518561332 
        H 2.690333749721795 0.4497038655626185 -0.8940935942447237 
        H 1.564909631539104 0.9430418869722014 -2.165979592470829 
        H -1.05535064363882 -1.400074382626551 -1.239112697444577 
        H -0.5879397264823896 -0.1185448427983952 -2.363881465467669 
        H -1.450981343636085 0.8327834616560491 1.608821030623928 
        H -1.561438783714034 -0.8523992985829429 1.048057801101499 
        H -0.7918354875790926 2.571673760646588 0.07349675289229918 
        H -0.4364845412413173 2.163176321914987 -1.609820425182064 
        H 0.5088545431887106 -0.4542062728857446 2.300978692832353 
        O 0.7337556879427753 -0.8095865047044724 3.938978827562541 
        H 0.6379956236704259 -1.623463316098104 4.449180738716705 
        H 0.6076568785029094 1.741132533147573 6.079559021152394 
        O 1.258975065925636 1.364135173084868 5.471507974444005 
        H 2.103187432352027 1.417998878599671 5.941255807447376 
        H 0.9095553787006972 -0.08395059521940731 4.582496485914561 
    End
    Charge 1.0
    BondOrders
         1 5 1.0
         1 7 1.0
         1 8 1.0
         2 5 1.0
         2 6 1.0
         2 9 1.0
         2 23 1.0
         3 6 1.0
         3 7 1.0
         3 10 1.0
         4 8 1.0
         4 9 1.0
         4 10 1.0
         5 11 1.0
         5 12 1.0
         6 13 1.0
         6 14 1.0
         7 15 1.0
         7 16 1.0
         8 17 1.0
         8 18 1.0
         9 19 1.0
         9 20 1.0
         10 21 1.0
         10 22 1.0
         24 25 1.0
         24 29 1.0
         26 27 1.0
         27 28 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
