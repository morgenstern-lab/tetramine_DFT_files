#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSpOHH3O+_s3H3O_GS_IRC	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
IRC
    KeepConvergedResults No
End
System
    Atoms
        H 3.216999952689482 -1.036148683969001 2.993281624083782 
        O 3.156620432990554 -2.055457466200299 3.056572915210854 
        H 3.190345123072548 -2.35838344809532 3.983476623737423 
        H 2.189125502167695 -2.149303313412915 2.686241565824545 
        O 0.2108952192193101 -2.777664548677443 3.616403041938949 
        H -0.1324736953742282 -2.216261594968041 4.326789439181574 
        N -1.750348415955044 -1.19623382055371 -0.1111201166586154 
        C -0.7517377135546933 -1.698827213264597 -1.069753429796612 
        N 0.5917969345249208 -1.228894445035651 -0.7447351828126458 
        C 1.318363937631589 -1.817536095085553 0.3533284248669464 
        N 0.9014045770571313 -1.485091634413373 1.762094818982395 
        C -0.2175111188144749 -2.260718816067333 2.378503745670824 
        N -1.324175374539925 1.413510869905367 -0.2235791835735739 
        C -0.4615846261963221 1.891166320764155 -1.311992070783301 
        N 0.9300547985249402 1.446725569443311 -1.139944558840355 
        C 1.461053911699432 1.791115308186877 0.165570293230296 
        N 0.5866454533780542 1.272818464786213 1.253934064762878 
        C -0.8347167233708535 1.694415587172533 1.110922370064594 
        S -2.507480740686807 0.2753232721350893 -0.4704545999585797 
        S 1.343791880541528 -0.07315043320669837 -1.725711112676909 
        S 1.056562869978305 0.1555606621877892 2.313055298539639 
        O -2.826795494494005 0.3516764839207152 -1.868461700527875 
        O -3.479231735692736 0.4180251794561891 0.5755216995033577 
        O 0.7345099504269086 -0.1762610344562149 -3.015438654143583 
        O 2.750971360567976 -0.2107622560369934 -1.474471740145265 
        O 0.2117866652012632 0.2153134388155304 3.472711431417702 
        O 2.511431897638664 0.3098350041694515 2.429754396225245 
        H -0.9786361883976825 -1.41496655014926 -2.0957029100646 
        H -0.7680792106937516 -2.788584844393772 -1.011142394859492 
        H 2.364607744455076 -1.548913666919936 0.2391204191995887 
        H 1.237594071279061 -2.905317535626548 0.2999632234605715 
        H -1.117900065219817 -1.662578777111516 2.471931759276536 
        H -0.4037359466378062 -3.103353552583709 1.715118385704081 
        H -0.4486062235710947 2.982639980047744 -1.290083977580342 
        H -0.8521513068622413 1.563110729323054 -2.268238312947284 
        H 1.463238381912767 2.878644559984087 0.25340501486606 
        H 2.473266721898344 1.425417845260776 0.2872191604773365 
        H -0.8477781341971317 2.774323072849181 1.275987478799609 
        H -1.456311804298131 1.222075694075986 1.863921692398956 
        H -2.496529448247485 -1.866423508145157 0.06188984333589178 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         2 4 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
