#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSCNp+_final_GibbsGOf	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task GeometryOptimization
Properties
    NormalModes Yes
End
System
    Atoms
        O 2.676313658281952 -1.089177402144143 -0.4802787355981724 
        O 1.858098939441731 -0.4493991167713554 1.819462546305286 
        S 1.651498048209803 -0.6385738010897132 0.4144365426531606 
        N 1.078755902847428 0.8279055401347108 -0.2345612906138884 
        N 0.2383379538092977 -1.552056348586387 0.2452580457419987 
        N -1.176138209255824 0.9882091160147948 0.7070442033796673 
        S -1.914763427594524 0.5213129000966024 -0.8846145656122057 
        N -0.6273327131311532 -0.2251112373633217 -1.583511004226621 
        O -2.93776078554033 -0.4179204677914937 -0.5585531435619283 
        O -2.125796822146523 1.77461984439114 -1.531908335367532 
        C 0.1989003179063103 1.601488568623934 0.6120253405497106 
        C -0.3102502572955428 -1.592222298430672 -1.128338262509437 
        C -1.81182060977514 0.8253293950155728 1.809620084916072 
        C 0.5810527449749513 0.6518274616650054 -1.603423515075612 
        H 0.6010232093826872 1.66894329004236 1.618800331321004 
        H 0.07869802593580599 2.595908829554826 0.1844511633036306 
        H 0.3871519575246146 -2.001418086370101 -1.861472137294501 
        H -1.216083788451987 -2.191011199182712 -1.1142095844037 
        H -1.309956231236312 1.033998134729305 2.74437851605922 
        H -2.767696178338764 0.3206090129594646 1.800943690779961 
        H 0.3271689419938102 1.615327818538388 -2.035650138261009 
        H 1.338894612403477 0.1656532467524954 -2.210683577581499 
        H 0.374752614759344 -2.478454566315589 0.6469723245246465 
        O -2.872698082797177 2.800834245944375 2.22299700000873 
        H -3.215959929465688 3.031898669283888 3.097964662754989 
        O -4.718567956872799 3.257275007130384 0.3007661828280587 
        H -3.601162823328336 2.997129020871949 1.582687076295812 
        H -5.652021282610265 3.005859274782259 0.3364897734135395 
        H -4.698243833321515 4.109274870910475 -0.1566284400062103 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         24 27 1.0
         26 28 1.0
         26 29 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
