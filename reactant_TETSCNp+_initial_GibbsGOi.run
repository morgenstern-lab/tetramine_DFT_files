#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSCNp+_initial_GibbsGOi	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task GeometryOptimization
Properties
    NormalModes Yes
End
System
    Atoms
        O 2.165964562097402 -1.293316019615097 0.1523192590441014 
        O 1.51986059530227 0.2631193997962835 2.038791264158096 
        S 1.374017198799079 -0.254313141224946 0.7207928989779367 
        N 1.071598043308461 0.9341968457547898 -0.3651865076871174 
        N -0.3757859055662869 -0.9376299559307067 0.6808530592882072 
        N -1.281246170027399 1.30067764836601 0.2294977496971997 
        S -1.858283303316207 0.8584816011418457 -1.310307357458076 
        N -0.6189399706023082 -0.2792307484024309 -1.679206254669454 
        O -3.070523449080325 0.1231630172885365 -1.136904908740024 
        O -1.691344589847778 1.972293935287619 -2.184088815583537 
        C 0.05149394048579081 1.919705834810591 0.1417693026374546 
        C -0.6760907939401164 -1.40380432380822 -0.7719226273729828 
        C -1.343575623252348 0.1921882975004926 1.153018187442869 
        C 0.7006308418204952 0.3830243924653005 -1.713583974929647 
        H 0.348986796578512 2.274729688892793 1.123810379103418 
        H 0.02381333745355882 2.748725732719954 -0.5583178134654408 
        H 0.07909592402220442 -2.142347209799688 -1.029416763565004 
        H -1.667503004615579 -1.847364338836617 -0.7702033872722452 
        H -1.032634379316661 0.5077614716866934 2.143168795735624 
        H -2.342045075824803 -0.2297816007804726 1.193238091696537 
        H 0.6670048381372289 1.214700771669916 -2.41024226003168 
        H 1.458707118851274 -0.3277890440544076 -2.028341902821273 
        H -0.4271295883267341 -1.732275056243658 1.326254324595054 
        O -2.715809731248153 1.987252178499589 2.839523468950446 
        H -3.058540194642587 2.275432936772149 3.69484041634071 
        O -4.171795998313231 3.034230031672235 0.6560926313454586 
        H -3.267937756708119 2.438377053490584 2.170032869068684 
        H -5.044799584187873 2.663858630948176 0.465180431999139 
        H -4.274273901158613 3.98674086605361 0.5229075289347166 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 13 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         24 27 1.0
         26 28 1.0
         26 29 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
