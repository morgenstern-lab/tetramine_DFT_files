#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSpOHH3O+_s3H3O_GS_initial_Gibbs	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task SinglePoint
Properties
    NormalModes Yes
End
System
    Atoms
        H 3.014448680967065 -0.9139200456398826 2.981337441333497 
        O 3.314142196579032 -1.860758557572334 3.350990725220218 
        H 3.773488891073199 -1.77405086649842 4.203649916864952 
        H 2.429024571801055 -2.399027646940622 3.44523454849461 
        O 1.060466981802508 -3.004285756281227 3.289298463115498 
        H 0.7072078999253251 -3.586961711860788 3.979910929351896 
        N -1.889045373464555 -1.110388512607061 -0.2410646735339683 
        C -0.8683182096604174 -1.655997198506279 -1.148569620182314 
        N 0.4824793531371284 -1.250674659747336 -0.7626453089263074 
        C 1.068687592371224 -1.801609775901841 0.4336917139550058 
        N 0.4850978825313715 -1.312263391690864 1.722068210563737 
        C -0.04636990666376701 -2.268516539240224 2.633400793705827 
        N -1.30759976057484 1.4654397258059 -0.3316138026409515 
        C -0.3920110787515805 1.899953383922787 -1.392153502475266 
        N 0.9744735983899138 1.412005626407351 -1.157954358112735 
        C 1.467936058433393 1.779008664488589 0.1559559644093967 
        N 0.5395591108266492 1.327139916642591 1.229080840374724 
        C -0.8703506319832971 1.760565550140745 1.018474286935889 
        S -2.544795274223934 0.3970169191050377 -0.6191042978791071 
        S 1.346036245471653 -0.1390719782989107 -1.693151921729821 
        S 0.9076247303840601 0.2011518152167133 2.315585901617332 
        O -2.808034622634195 0.4949600888416296 -2.028744663055927 
        O -3.546811263435303 0.6011111346965602 0.3877314343480799 
        O 0.8162581240120628 -0.2294994581871358 -3.019081334502697 
        O 2.726550892840018 -0.3398609438799953 -1.350532491133648 
        O 0.1369662391787664 0.379900429608572 3.510755626329645 
        O 2.385368056798512 0.2378575591010795 2.39524757025499 
        H -1.029560199537858 -1.36639599507145 -2.185325095666211 
        H -0.9349892351260085 -2.743787053494494 -1.088116448960884 
        H 2.13978295978445 -1.619691972825114 0.4022766333291324 
        H 0.9114744364548825 -2.881621502017883 0.4462470329298661 
        H -0.6444651367292372 -1.780346564603338 3.395733072278973 
        H -0.6342202350453753 -3.003080117335476 2.086132996513902 
        H -0.342078714059584 2.990647075570048 -1.386626047894632 
        H -0.7566327563027949 1.569738410868221 -2.357818128150749 
        H 1.504837189456645 2.86792337734621 0.2080846596793212 
        H 2.460166606788308 1.380707701033264 0.3261874567935055 
        H -0.8828402494204428 2.841873813157697 1.172811896068722 
        H -1.528194475001358 1.298939202438603 1.747910749341052 
        H -2.6685925820484 -1.745225152375768 -0.0892119264432243 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         2 4 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
