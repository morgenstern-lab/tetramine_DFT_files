#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSp2H2O+_GS_TS_search_rev	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task TransitionStateSearch
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        H 3.1634838533327 -1.173822240510219 3.136226302852422 
        O 3.148840785667381 -2.110181793580357 3.444267646453352 
        H 3.730458122817221 -2.193242037619051 4.214288630290015 
        H 1.883277799509376 -2.581435000063152 3.493932637011232 
        O 0.8610332600422469 -2.990571990825783 3.396810943944476 
        H 0.4667659587176674 -3.143098299492307 4.273052389462907 
        N -1.785546864830542 -1.21357678988644 -0.1785075273066769 
        C -0.7816639418920298 -1.684306040325513 -1.150672315544409 
        N 0.5630434511851335 -1.230881270150542 -0.8073315459250466 
        C 1.199887347551193 -1.749138802870383 0.376903250511637 
        N 0.6323854252521144 -1.268240852170267 1.674015050999952 
        C -0.1013982586768352 -2.115600770784672 2.478870349521709 
        N -1.326648534682151 1.403271174060597 -0.2702772962012234 
        C -0.4823806085133555 1.865721424172633 -1.379574581568556 
        N 0.9155039815156053 1.451897594637213 -1.198454613799077 
        C 1.450647562002169 1.859267135483926 0.09008417999083387 
        N 0.5872037103526613 1.400934211889949 1.210559846311116 
        C -0.8424578649181665 1.769410977273368 1.048650013023427 
        S -2.526885236269774 0.280613767805878 -0.4806123377813595 
        S 1.346921206026771 -0.07364034484393842 -1.756331254281569 
        S 1.050116462635184 0.2833298929131991 2.276837652050505 
        O -2.899584794554943 0.3755619726091651 -1.865248158935225 
        O -3.458238011160586 0.4232133281444427 0.6023629485022324 
        O 0.7769875149883834 -0.1845153318350977 -3.064098234840153 
        O 2.744181405363629 -0.2128673116100626 -1.45914027886143 
        O 0.272967111687531 0.4101034077746221 3.477591560041073 
        O 2.501470030386471 0.3041491077612982 2.304980217539408 
        H -1.000864738674032 -1.373842398500946 -2.170569932457099 
        H -0.8005598652745747 -2.775838683470798 -1.121122422753253 
        H 2.259197469614134 -1.511596546753619 0.3346932879844803 
        H 1.096595931143724 -2.835798452616229 0.3966521733453239 
        H -0.7364664400863147 -1.596418245033701 3.185077916235577 
        H -0.6172089564994157 -2.887043653469197 1.919613396117991 
        H -0.4918785601195563 2.957545626908664 -1.391493335183647 
        H -0.8710943356000871 1.50217257013852 -2.323736187155808 
        H 1.453615192185414 2.949886298208219 0.1190214437255848 
        H 2.462904314033591 1.497901727629198 0.2251617161340104 
        H -0.8941742637388366 2.855179737733998 1.15642855068508 
        H -1.449564839737017 1.316435390319065 1.825264576345748 
        H -2.543703188570493 -1.882033492534757 -0.05809141902220292 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 5 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
