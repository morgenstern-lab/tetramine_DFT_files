#!/bin/bash

##########
#update the variables below as needed
##########

JOB=step1CO_HEXSHplus_B3LYP_TZP_AllingerWater_TS_300C	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task SinglePoint
Properties
    NormalModes Yes
End
Thermo
    Temperatures 573.15
End
System
    Atoms
        H 3.161418145837873 -1.231494944299696 3.357112620388603 adf.R=1.350
        O 3.626201349074416 -2.080067905959545 3.280229527353269 adf.R=1.517
        H 4.05107312411964 -2.204435871100695 4.141651243839651 adf.R=1.350
        H 2.641691767798091 -3.572236676824905 2.817117960094828 adf.R=1.350
        O 2.162406089365744 -4.34226356270705 2.444920386667915 adf.R=1.517
        H 1.660271572557498 -4.701973413633171 3.189557050982892 adf.R=1.350
        N -1.89845570204534 -1.048535101233991 -0.01638486325726312 adf.R=1.608
        C -0.8673287753804592 -1.748240904800864 -0.8525601320972981 adf.R=1.700
        N 0.4857900495338714 -1.354098864149245 -0.4880365915261479 adf.R=1.608
        C 0.9447054317064858 -1.685242572855201 0.8437902708327595 adf.R=1.700
        N 0.1258186598096761 -0.9618045130919833 1.861831454718281 adf.R=1.608
        C -1.135063512293037 -1.320579768258864 1.971082275593507 adf.R=1.700
        N -1.281754717625872 1.539278193314221 -0.4881287512383704 adf.R=1.608
        C -0.2935640005334286 1.736787618812589 -1.566709374341971 adf.R=1.700
        N 1.028242871332174 1.249200143615985 -1.162295127939992 adf.R=1.608
        C 1.473777004159114 1.829067917838416 0.1066863164750306 adf.R=1.700
        N 0.4560145193135359 1.663436770606103 1.171437723896073 adf.R=1.608
        C -0.8852210235616426 2.142033660907662 0.7874325111146404 adf.R=1.700
        S -2.503015705871745 0.4742073781483292 -0.6044835046153223 adf.R=1.792
        S 1.396688603770262 -0.3510744905423684 -1.475071603519421 adf.R=1.792
        S 0.6425390423305377 0.6325477358611613 2.405924384859251 adf.R=1.792
        O -2.791446212798918 0.3011932888719041 -2.003981376397159 adf.R=1.517
        O -3.505674355724202 0.8148949670951288 0.3675376715551895 adf.R=1.517
        O 0.9397614806818082 -0.6038239607505674 -2.814899172093419 adf.R=1.517
        O 2.761570220587467 -0.5268531392816197 -1.056291542691209 adf.R=1.517
        O -0.3074805308697691 0.9608302131782168 3.426313535923128 adf.R=1.517
        O 2.048645878580873 0.4486678029545944 2.633755460007325 adf.R=1.517
        H -1.03388371905912 -1.580468620066483 -1.911452350678095 adf.R=1.350
        H -0.9891058493315291 -2.809748652867241 -0.6471253542506364 adf.R=1.350
        H 1.988141742157209 -1.424037638694126 0.9632501159799524 adf.R=1.350
        H 0.8234310799443749 -2.749534215567099 1.043686390182925 adf.R=1.350
        H -1.816347843581829 -0.710125489495641 2.545295381985318 adf.R=1.350
        H -1.373248812336518 -2.36416222507335 1.825099155869803 adf.R=1.350
        H -0.2068679886288637 2.808526824240444 -1.736064668383672 adf.R=1.350
        H -0.6243457857485952 1.257682214299138 -2.478750961142754 adf.R=1.350
        H 1.591659075388289 2.899623114124281 -0.04874538443450004 adf.R=1.350
        H 2.420007743169274 1.407602623425547 0.4194965500268467 adf.R=1.350
        H -0.8158384437355709 3.218646202984195 0.6431570895666427 adf.R=1.350
        H -1.612526726680044 1.939165042978747 1.563920814921576 adf.R=1.350
        H -2.728177218239709 -1.640418702751906 0.05425397937265488 adf.R=1.350
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 5 1.0
         5 6 1.0
         7 8 1.0
         7 12 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
    Solvation
        Surf Delley
        Solv name=Water cav0=0.0 cav1=0.0067639
        Charged method=CONJ
        C-Mat POT
        SCF VAR ALL 
        CSMRSP
    End
EndEngine
eor

########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
