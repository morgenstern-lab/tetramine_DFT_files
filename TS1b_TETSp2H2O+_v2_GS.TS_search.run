#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSp2H2O+_v2_GS.TS_search	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='10:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=64        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########


Task TransitionStateSearch
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        O 2.558505608198419 -0.9291537978555351 -0.5751781818998425 
        O 1.847058862371259 -0.3014291261368526 1.760038320998361 
        S 1.56512691882591 -0.504786011361594 0.369665344349028 
        N 0.9224650890031394 0.9399345538221145 -0.254996128582153 
        N 0.1856066451802371 -1.473867159814997 0.2789047576653996 
        N -1.28843694462415 1.063956771674228 0.7935515320200515 
        S -2.062423072842318 0.5320139786409621 -0.6055288667871018 
        N -0.8468526583071737 -0.1575975621975624 -1.481913767200558 
        O -3.046504470827274 -0.4344163220307772 -0.2230003265495651 
        O -2.4758916777686 1.723033184453287 -1.349430129399207 
        C 0.05710254833299943 1.699188654464281 0.6276020221379944 
        C -0.4518462942187275 -1.516670622359893 -1.053799832142491 
        C -1.971040029704004 1.078615819392995 2.011442983003466 
        C 0.3394610438777103 0.7425610606076373 -1.585230289249819 
        H 0.5071657642681132 1.763085591543992 1.614595304346119 
        H -0.04401244383676384 2.699700103333253 0.205522865228194 
        H 0.2062676022083507 -1.893395436113075 -1.839784268770237 
        H -1.333366445706972 -2.147256622790606 -0.9858844478020512 
        H -1.278135111817976 1.061046111535868 2.848708017390222 
        H -2.710960251136007 0.2859727387276391 2.069157913803827 
        H 0.03761830219683303 1.699053755462456 -2.00380438510835 
        H 1.061098221602446 0.2690328662974927 -2.244551623744381 
        H 0.3888943611370225 -2.399556056325377 0.6520876740844711 
        O -2.73928742379846 2.417373096263139 2.16976239047488 
        H -3.190450474113665 2.423468184479637 3.031000531885469 
        O -4.115581961086392 2.986546716069542 0.2279272023021224 
        H -3.528053242159717 2.77097659645943 1.157431457499581 
        H -4.271055908740867 3.933730027408785 0.07844415837998452 
        H -3.580019234627034 2.59327523852583 -0.5372833800210913 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         13 24 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         26 28 1.0
         26 29 1.0
         27 26 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
