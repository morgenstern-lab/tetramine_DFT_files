#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSpOHH3O+_s3H3O_final_Gibbs	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
########

Task SinglePoint
Properties
    NormalModes Yes
End
System
    Atoms
        O 2.471009822932331 -0.5071690656827261 0.04857560427279164 
        O 1.260737774986364 0.3511636789268255 2.089684995071253 
        S 1.279613355563667 -0.09114874152311986 0.7249074726920997 
        N 0.5867950791373798 1.128472434408707 -0.22509235741987 
        N 0.04791074668228559 -1.251246966348599 0.5823044663949463 
        N -1.842157646816921 1.326365349759129 0.4461377857356402 
        S -2.257569102026748 0.3077965303630436 -1.068850179548381 
        N -0.8102707739990653 -0.346330643789405 -1.495343455547489 
        O -3.145902180920862 -0.7080411848157327 -0.6087338017794849 
        O -2.595287859775851 1.336730548413471 -1.999238111709334 
        C -0.4275662207486577 1.956392729715402 0.3652532181384225 
        C -0.3649588462066791 -1.567653278418312 -0.8058527047341213 
        C -2.218932842823245 0.6798493874764723 1.796413023499051 
        C 0.2756974974078735 0.6666319592123664 -1.578645529622564 
        H -0.1557999555792746 2.243204607718777 1.375189579307572 
        H -0.5458027608716022 2.848230485201251 -0.2460662751595286 
        H 0.4452387245073178 -1.977366194831574 -1.412372046397244 
        H -1.180573228280847 -2.283144949863035 -0.7587020990126008 
        H -1.561818896641981 -0.1662471515653372 1.962239551506925 
        H -3.250695821721681 0.3596296336067718 1.675166177025083 
        H -0.03943897586694246 1.50255317453737 -2.197234605939224 
        H 1.147780891999275 0.1943001974928908 -2.022121686301427 
        H 0.3154702235599639 -2.088468653212687 1.100561706554478 
        O -2.14145617483355 1.66725018933115 2.768304159216161 
        H -1.386681653148674 1.512445588715437 3.354304634782095 
        O -3.212479185896818 3.676358282507373 0.4067521948064053 
        H -2.488483306685047 2.155297636316066 0.3611042823180254 
        H -3.53361732911023 4.007590625196539 1.258005689839346 
        H -3.790588956302594 4.061255057376441 -0.2674435263248011 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         6 27 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         13 24 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         26 28 1.0
         26 29 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
