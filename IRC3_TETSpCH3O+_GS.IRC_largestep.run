#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSpCH3O+_GS.IRC_largestep	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='22:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=64        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
IRC
    Step 0.4
End
System
    Atoms
        O 2.403620818637422 -0.8748865543587285 -0.3451085918001727 
        O 1.694850105911831 0.3297873879391915 1.755855176301641 
        S 1.426746919818232 -0.1846920437957031 0.4448490870163685 
        N 0.8364547210235884 1.076705357432823 -0.5092663932859343 
        N 0.00981290884852962 -1.142775009308638 0.5872803067254964 
        N -1.366373016240024 1.640215061510368 0.4729337759774999 
        S -2.166202322920109 0.7783340866678198 -0.7630228454649001 
        N -0.9894233509234941 -0.190495345459426 -1.41854862524749 
        O -3.125853184560363 -0.09807773606823883 -0.09323368466550803 
        O -2.625909236033435 1.688294763512046 -1.770670081806094 
        C 0.03793328854342824 2.097789003264663 0.1366234742533032 
        C -0.6521822361532695 -1.431182444461511 -0.7175452899230671 
        C -2.072595790533769 0.4349274138819144 2.641428280903686 
        C 0.2259533407726573 0.5939376400719948 -1.753506643109822 
        H 0.5051877841697026 2.393357643403215 1.070895720580459 
        H -0.001988946720732744 2.955060797856848 -0.53757962399681 
        H -0.0130655090445978 -1.999139604418233 -1.396125289948447 
        H -1.556227312441192 -1.997946427788408 -0.5168304414177071 
        H -1.73657253908956 0.99607509609099 3.511399785762231 
        H -1.400921268545448 -0.2243655267250665 2.092267575446434 
        H -0.03957439802148072 1.440406291596598 -2.382602780157479 
        H 0.916319016363731 -0.05095580518191777 -2.289540764476949 
        H 0.2906643290380133 -2.015766672929849 1.037601211056418 
        O -3.299534531170857 0.501698717046163 2.377304468007911 
        H -3.46831710125384 0.09337372232280537 1.456882229030713 
        O -3.421744848008625 3.578247646835409 0.5802763907425016 
        H -3.728627055063298 4.349507301362681 1.076519711155045 
        H -1.96592471879931 2.472547648061816 0.6291567649407804 
        H -3.783587547704026 3.682774002003257 -0.3122256166482248 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 28 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         13 24 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         26 27 1.0
         26 29 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
