#!/bin/bash

##########
#update the variables below as needed
##########

JOB=TETSCNp+_GS.IRC	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        O 2.298277233659858 -1.236348386509932 0.06622323050519528 
        O 1.521944028294137 0.1569713875863378 2.026894888816404 
        S 1.382045539263502 -0.3397016051700434 0.6948799459646477 
        N 1.066563610881583 0.9254114446032996 -0.3494925830834284 
        N -0.2232970018316204 -1.06148615517386 0.6291421345074821 
        N -1.253984340723211 1.346307914456419 0.2777347910123875 
        S -1.871410665612998 0.8302252633152769 -1.284876594114012 
        N -0.6312437269558177 -0.2517803118025113 -1.648157876112418 
        O -3.067741896111737 0.09152079596861176 -1.038838032119331 
        O -1.75463697752266 1.954371842815956 -2.151032421830566 
        C 0.1154084284148988 1.928285161841222 0.1756984395974962 
        C -0.6065560428810385 -1.438811482024946 -0.7879520990549207 
        C -1.453539356648534 0.4582239485655845 1.260567387234538 
        C 0.6839203446205848 0.4352608397865319 -1.699255093515748 
        H 0.4248679114956375 2.263030028002209 1.16116628648244 
        H 0.0886148540358719 2.767391833793039 -0.5129501227528644 
        H 0.1198443544733551 -2.140743050049961 -1.195707453349587 
        H -1.589899786831286 -1.899155860294638 -0.758838358918334 
        H -0.95308761946749 0.6248781118487511 2.201231406345071 
        H -2.374684772792732 -0.103659598050902 1.257165277402827 
        H 0.6247158017712805 1.2819010590406 -2.376062591717786 
        H 1.432284526523819 -0.2654869631253387 -2.056995593429557 
        H -0.2640642653458447 -1.864944463674478 1.260253332734866 
        O -2.798905043969749 2.049981713355275 2.777233947690781 
        H -3.216134479174494 2.117631295272893 3.645765637866938 
        O -4.245596284384153 3.070084043697546 0.6305698812236827 
        H -3.403634573240521 2.491885665468222 2.146088157520862 
        H -5.116630533240174 2.715050844278491 0.4038888179916097 
        H -4.322824642272723 4.023793182249118 0.4874042988942745 
    End
    Charge 1.0
    BondOrders
         1 3 2.0
         2 3 2.0
         3 4 1.0
         3 5 1.0
         4 11 1.0
         4 14 1.0
         5 12 1.0
         5 23 1.0
         6 7 1.0
         6 11 1.0
         6 13 1.0
         7 8 1.0
         7 9 2.0
         7 10 2.0
         8 12 1.0
         8 14 1.0
         11 15 1.0
         11 16 1.0
         12 17 1.0
         12 18 1.0
         13 19 1.0
         13 20 1.0
         14 21 1.0
         14 22 1.0
         24 25 1.0
         24 27 1.0
         26 28 1.0
         26 29 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
