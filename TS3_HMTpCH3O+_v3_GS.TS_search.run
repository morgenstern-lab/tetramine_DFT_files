#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HMTpCH3O+_v3_GS.TS_search	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='20:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task TransitionStateSearch
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        N 1.036335125011014 -0.333541307792652 -0.8322663425024813 
        N -0.1574303506024332 -0.9016865301929154 1.179557853388673 
        N 1.15680492564473 1.538973252217152 0.7348060052012028 
        N -0.9604015243077012 0.845528543326841 -0.2650942457827503 
        C 0.7117223328853217 -1.407610101972038 0.1048049850219195 
        C 1.750318937305591 1.311147123501568 2.966746376077821 
        C 1.876763120907843 0.7245493520861073 -0.2723672480387428 
        C -0.2033959626793973 0.247823872217414 -1.380328835677995 
        C -1.348764015319919 -0.1905135481440856 0.6890127696535534 
        C -0.2080337620444917 1.954761860751979 0.3155497028689651 
        H 0.2377462221031705 -2.244908703409739 -0.4597680912926245 
        H 1.642303136453566 -1.813050861415529 0.5539493042313083 
        H 1.537204645996139 2.400198626773051 3.023214297365485 
        H 1.038073259085321 0.569303918460625 3.433975109667133 
        H 2.783307504857704 0.2973190228675969 0.2032371909075369 
        H 2.22608222330732 1.40154279141529 -1.081840335330813 
        H -0.8071378190657158 -0.536088640747057 -1.876289935057955 
        H 0.03430009078784443 1.016760540947723 -2.14030871069672 
        H -1.876927355367221 0.2668738430286024 1.552030022405463 
        H -2.076755265917956 -0.8780520309986534 0.1972302780178712 
        H -0.7360366282634245 2.375110884520488 1.194331235328711 
        H -0.1045902410745708 2.774220172722382 -0.4275582760663935 
        H -0.4213548979989786 -1.663242739528256 1.834045935840788 
        O 2.968508857204347 0.9359529461176178 2.863343712652354 
        H 3.610852399485744 1.643370423494585 2.626003813540173 
        H 1.047706095390507 0.9373693408395617 1.62129754202241 
        O -0.07487168640928664 -0.4889222416688033 4.430879305834963 
        H -1.018281716242012 -0.3549311504948057 4.616316424548659 
        H 0.2227731601871959 -1.216032773970171 5.001227466371954 
    End
    Charge 1.0
    BondOrders
         1 5 0.9764117002487183
         1 7 0.9874771237373352
         1 8 0.9630978107452393
         2 5 0.9728771448135376
         2 9 0.9734500646591187
         2 23 0.9362745881080627
         3 7 0.9452708959579468
         3 10 0.9338595867156982
         3 26 0.7900782227516174
         4 8 0.9630528688430786
         4 9 0.9763554930686951
         4 10 0.9909496903419495
         5 11 0.9485606551170349
         5 12 0.9591838717460632
         6 13 0.929610550403595
         6 14 0.8610178232192993
         6 24 1.442700147628784
         7 15 0.9538793563842773
         7 16 0.9425936341285706
         8 17 0.9576288461685181
         8 18 0.9598712921142578
         9 19 0.9591963291168213
         9 20 0.9483107328414917
         10 21 0.9570648670196533
         10 22 0.9424113035202026
         24 25 0.8305004835128784
         27 28 0.8779516816139221
         27 29 0.8774886131286621
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
