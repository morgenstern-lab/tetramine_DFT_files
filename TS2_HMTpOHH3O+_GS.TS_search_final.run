#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HMTpOHH3O+_GS.TS_search_final	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='14:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=64        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task TransitionStateSearch
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        N 0.7690702088581285 -0.8584317547024135 -0.3663407023110384 
        N -1.136817672487114 -1.283068693273878 1.173542705032737 
        N 1.034104380851211 0.9596087284828423 1.334663324066186 
        N -0.9458230958338363 0.8002399147800847 -0.1807086817927186 
        C -0.06607637316810291 -1.845570621837614 0.3490687637431975 
        C 2.007612940589962 1.961279990076922 1.743611813596066 
        C 1.688353511598187 -0.09417969908242084 0.4213111163109843 
        C -0.1088198444322587 0.0429633929391547 -1.117831944429445 
        C -1.816099715269459 -0.1484386805854479 0.5469607685793952 
        C -0.1221168015525007 1.664310792862668 0.6078126624185437 
        H -0.5164829682718093 -2.472665764591875 -0.4222734258482684 
        H 0.5679029737510589 -2.481130569872899 0.9660890416106688 
        H 2.706125792968606 2.221990004497506 0.9430306128922172 
        H 1.49058457550394 2.859296348091708 2.088174301352991 
        H 2.284830267249914 -0.7510140039025408 1.054508589766221 
        H 2.364429836459978 0.4394391072927965 -0.2560257089195554 
        H -0.7450021380307194 -0.5400965687254621 -1.781831261933655 
        H 0.4871361292630381 0.7280253827800804 -1.723365946787693 
        H -2.392446202154473 0.3906552752178217 1.298568071810601 
        H -2.518382016124146 -0.5342600000991351 -0.1940559801813926 
        H -0.7165522029399051 2.175992197374212 1.367283649213574 
        H 0.3097366230001701 2.419411042384738 -0.05793783835532797 
        H -0.819617708494409 -1.07328425972723 2.108417816372846 
        O 2.781519231720273 1.395980535854518 2.846693462557285 
        H 3.491427730679951 1.997376051702611 3.117625782164974 
        H 0.6924667404629969 0.3032056491631775 2.767633755334279 
        O 0.9523763238684474 0.03610116614963595 3.683904947543018 
        H 0.3278196427334297 0.3098298425659248 4.378499345703013 
        H 1.835560635113872 0.5886610755525202 3.70870825915429 
    End
    Charge 1.0
    BondOrders
         1 5 1.0
         1 7 1.0
         1 8 1.0
         2 5 1.0
         2 9 1.0
         2 23 1.0
         3 6 1.0
         3 7 1.0
         3 10 1.0
         4 8 1.0
         4 9 1.0
         4 10 1.0
         5 11 1.0
         5 12 1.0
         6 13 1.0
         6 14 1.0
         6 24 1.0
         7 15 1.0
         7 16 1.0
         8 17 1.0
         8 18 1.0
         9 19 1.0
         9 20 1.0
         10 21 1.0
         10 22 1.0
         24 25 1.0
         26 27 1.0
         27 28 1.0
         29 27 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
