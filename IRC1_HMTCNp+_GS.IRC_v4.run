#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HMTCNp+_GS.IRC_v4	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task IRC
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
IRC
    Step 0.15
End
System
    Atoms
        N 0.8857004117712903 -0.7096375118232164 -0.9412436718113123 
        N 0.3482176003518139 -0.2513607430333654 1.389465932679314 
        N 1.07107280163362 1.653030693241342 -0.4362381219522339 
        N -1.090123436978177 0.5523568106894684 -0.4003582290651465 
        C 0.969522255708634 -1.200180606727904 0.4496506427625954 
        C 1.589933368216762 1.97589538050355 0.6848369157741203 
        C 1.64613578821492 0.476625885772697 -1.213806989669842 
        C -0.5263284690889788 -0.4812984693749104 -1.28132900489916 
        C -1.032988381018681 0.0718358950180847 0.9956700306208947 
        C -0.4311467946701925 1.804871888803386 -0.6407262613247565 
        H 0.4820913928239844 -2.182962775647745 0.4588174063298677 
        H 2.01483907544291 -1.343626474149044 0.7242496869295131 
        H 2.595662746350289 1.657225497694393 0.9327522256474586 
        H 1.065389261593771 2.641337792808876 1.360275144038218 
        H 2.688070444606047 0.3667379186750028 -0.9185522007712184 
        H 1.584781420025574 0.730427942792133 -2.27092928164822 
        H -1.081887198726486 -1.407952241032122 -1.147547287056621 
        H -0.6121854251335713 -0.1689816039008874 -2.322480261685341 
        H -1.427755151819056 0.8409202671757497 1.660477133473103 
        H -1.703249406791632 -0.79511278965673 1.050261566314964 
        H -0.7781253218659693 2.582344877266627 0.03786746643592816 
        H -0.5822049054600641 2.119293083958911 -1.672156010154741 
        H 0.3977317646043714 -0.6011825898508507 2.3509416084147 
        O 0.7507918111671881 -1.078470123297316 4.131960716916624 
        H 0.55421087772122 -1.847322898001227 4.68144003067551 
        H 0.4764772060243278 1.547573997308805 6.246869735552121 
        O 1.167004617527728 1.24973294762819 5.638804094442719 
        H 1.987090843675545 1.312474709999281 6.148170919552544 
        H 0.8874213253128072 -0.3313049692365659 4.748844104666121 
    End
    Charge 1.0
    BondOrders
         1 5 1.0
         1 7 1.0
         1 8 1.0
         2 5 1.0
         2 9 1.0
         2 23 1.0
         3 6 1.0
         3 7 1.0
         3 10 1.0
         4 8 1.0
         4 9 1.0
         4 10 1.0
         5 11 1.0
         5 12 1.0
         6 13 1.0
         6 14 1.0
         7 15 1.0
         7 16 1.0
         8 17 1.0
         8 18 1.0
         9 19 1.0
         9 20 1.0
         10 21 1.0
         10 22 1.0
         24 25 1.0
         24 29 1.0
         26 27 1.0
         27 28 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
