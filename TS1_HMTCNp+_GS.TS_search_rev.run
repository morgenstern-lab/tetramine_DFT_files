#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HMTCNp+_GS.TS_search_rev	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task TransitionStateSearch
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        N 0.7603626631415824 -0.7247080466639241 -1.019611772426908 
        N 0.5679680642008444 -0.2991010534867759 1.36695691066842 
        N 1.132079098768129 1.615088491333649 -0.5037178514619123 
        N -1.056175531347394 0.6203329626029424 -0.1940330846583021 
        C 1.000439491221985 -1.256888401421993 0.3376369923675956 
        C 1.812551966952552 1.902958431822092 0.5365835055587115 
        C 1.539975206756838 0.4291055889171304 -1.368341872605547 
        C -0.670407313237403 -0.4175521445279294 -1.161300459728424 
        C -0.8331292042321886 0.1047951541046637 1.172637454330766 
        C -0.3733242560605725 1.844264462592957 -0.5024107485124389 
        H 0.46003947480891 -2.210471469455721 0.3916905597409425 
        H 2.062625032577313 -1.467875991072652 0.4650370978329019 
        H 2.827130320795794 1.538681699854841 0.6462573111335178 
        H 1.41141596881107 2.580100022493693 1.281555795888866 
        H 2.604118284671845 0.2609779067301932 -1.213532989224115 
        H 1.355588339342329 0.7110596876731964 -2.403849203253701 
        H -1.250916220495739 -1.318555042592497 -0.9698787783782326 
        H -0.8782741909615996 -0.07523298209387025 -2.175441130477473 
        H -1.088381059980823 0.8768823249828779 1.899252508285243 
        H -1.537335280485235 -0.7263210148286915 1.304398086492129 
        H -0.5852334627035581 2.622074920264447 0.2290230056705368 
        H -0.6460465001380535 2.188328677532297 -1.498862372953697 
        H 0.7253677333479256 -0.6575408524530191 2.314196856568731 
        O 1.060191879419107 -1.024931658166351 4.11416189649857 
        H 1.085415463454145 -1.834389433504814 4.639298359214922 
        H -0.2670124884354595 1.341224966024722 6.151587731826306 
        O 0.5476855188918391 1.27077840799804 5.634823871349489 
        H 1.243307666298296 1.586601925135515 6.228086657029228 
        H 0.88612385583752 -0.2963957461903983 4.743783704411584 
    End
    Charge 1.0
    BondOrders
         1 5 1.0
         1 7 1.0
         1 8 1.0
         2 5 1.0
         2 9 1.0
         2 23 1.0
         3 6 1.0
         3 7 1.0
         3 10 1.0
         4 8 1.0
         4 9 1.0
         4 10 1.0
         5 11 1.0
         5 12 1.0
         6 13 1.0
         6 14 1.0
         7 15 1.0
         7 16 1.0
         8 17 1.0
         8 18 1.0
         9 19 1.0
         9 20 1.0
         10 21 1.0
         10 22 1.0
         24 25 1.0
         24 29 1.0
         26 27 1.0
         27 28 1.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
