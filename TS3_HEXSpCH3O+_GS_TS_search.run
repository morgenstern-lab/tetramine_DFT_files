#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSpCH3O+_GS_TS_search	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task TransitionStateSearch
Properties
    NormalModes Yes
End
GeometryOptimization
    InitialHessian
        Type Calculate
    End
End
System
    Atoms
        H 3.772522273030968 -2.246260385951155 3.268361824824161 
        O 2.991175988274831 -2.791549196536266 3.096481701679454 
        H 3.126550204306897 -3.604006722297568 3.602869117572153 
        H 1.653492978161268 -1.952763555887718 2.185328916090604 
        O -0.3569153031935945 -2.066366210904615 3.953640246061292 
        H -0.07775899707537184 -1.088241871985863 4.062734297414705 
        N -1.516030289558885 -1.496562737280211 -0.2095990080460464 
        C -0.4910449427902361 -1.724572847619917 -1.249689745953787 
        N 0.7769224182357677 -1.103718007364932 -0.8988214703505671 
        C 1.567643097093232 -1.646153781819064 0.1744998262960882 
        N 1.067831360535419 -1.35649281434958 1.570691036963437 
        C -0.9168980481504656 -2.200722495853212 2.834519893056685 
        N -1.335601851067483 1.174460992877231 -0.08859547605314201 
        C -0.6444096627389569 1.819915001471784 -1.219626584272921 
        N 0.8047343806923805 1.59694870020171 -1.15731159404928 
        C 1.378596494360119 1.974857615275056 0.1266018603726035 
        N 0.6609459928158351 1.324020182894522 1.254055484666698 
        C -0.7970127473867639 1.545599338009461 1.209995215524329 
        S -2.418694323268538 -0.05536211908003575 -0.2746674126833013 
        S 1.375134384298988 0.168196943417634 -1.834583400582306 
        S 1.362778705862195 0.2145965682748126 2.201315841067718 
        O -2.993337641950601 0.1119991715494285 -1.579532248517696 
        O -3.200615259145095 -0.1228536531694305 0.9346663876793554 
        O 0.7379264163876763 0.06108467447873969 -3.111820106585887 
        O 2.794548046678015 0.179635149479458 -1.632169704618525 
        O 0.6060633164232945 0.2108473308529469 3.457140989944669 
        O 2.776761596732022 0.4580833248709528 2.211434152808906 
        H -0.7946981183775399 -1.367633881366437 -2.231873900519953 
        H -0.3552649468896295 -2.806255403108263 -1.311280933057839 
        H 2.5949075228216 -1.30551119829086 0.06313640765866367 
        H 1.560424563006768 -2.736020637429518 0.1148580891048391 
        H -1.368800278308916 -1.373261977245841 2.300713622982227 
        H -1.075371709528335 -3.220641653800789 2.492609376102805 
        H -0.8077615664540336 2.897065748132553 -1.15013884032924 
        H -1.048015841876 1.466288001793093 -2.161611144262652 
        H 1.251089994962099 3.051586919856597 0.2455672246986186 
        H 2.43540606190379 1.737283778439573 0.1661235278000403 
        H -0.9544282265812549 2.617137759216225 1.355914663273307 
        H -1.303897437866566 1.020470913845582 2.010155606740144 
        H -2.214568864888909 -2.239094068138947 -0.2383524478375312 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 11 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
