#!/bin/bash

##########
#update the variables below as needed
##########

JOB=HEXSpOHH3O+_s3H3O_GS_final_Gibbs	#this is the name of your job
		#make sure there are no spaces in the name
CURDIR=`'pwd'`  #do not change this line
TIME='23:00:00' #run time (hh:mm:ss) - 2 hours
NODES=1		#total number of nodes
TASKS=128        #total number of mpi tasks requested
		#should be 64 tasks per node

#########
#Do not change this next section!
#########
cat > $JOB.sbatch << EOF_ALL
#!/bin/sh

#SBATCH -J $JOB  	         # job name
#SBATCH -o $CURDIR/$JOB.out
#SBATCH -e $CURDIR/$JOB.err
#SBATCH -N $NODES                # total number of nodes 
#SBATCH -n $TASKS                # total number of mpi tasks requested
#SBATCH -t $TIME                 # run time (hh:mm:ss) - 1.5 hours

#!/bin/sh

AMS_JOBNAME=$JOB $AMSBIN/ams << eor

########
#replace the lines below with your adf input file
#starting with the "Task"
########

Task SinglePoint
Properties
    NormalModes Yes
End
System
    Atoms
        H 3.99866166849282 -2.01675411879171 3.116409756656467 
        O 3.2685895922347 -2.593338802101933 2.846797383560878 
        H 3.198352106934244 -3.264509823723344 3.54134582251691 
        H 1.832867812162351 -1.848400553819752 2.345945546987057 
        O 0.09864700790777753 -2.611948949527886 3.717395810186199 
        H -0.1506459671558329 -1.899298997020757 4.325603633373944 
        N -1.731619078954572 -1.212189977444511 -0.1060223946033046 
        C -0.7056819786415887 -1.707877787051394 -1.036185330219907 
        N 0.6199935212140112 -1.195277472103256 -0.6905809751665036 
        C 1.375084505115142 -1.797413373319842 0.3559176501579047 
        N 0.9948564850517871 -1.467816392447626 1.820827593008707 
        C -0.1941471292275438 -2.239831770044407 2.42006557337123 
        N -1.365531880614909 1.407006825197092 -0.2548623307689314 
        C -0.4975140138110289 1.893431266214312 -1.334463123715639 
        N 0.900990358727383 1.478889534371914 -1.136944336199032 
        C 1.40737486997936 1.849722064676981 0.1690659885157717 
        N 0.5228660809550454 1.310649162080707 1.242765786117313 
        C -0.9062859777782395 1.707773150141588 1.08384112313224 
        S -2.517139208605872 0.235875959036602 -0.5079628094738109 
        S 1.358879235599344 -0.03454399124174712 -1.696528155002045 
        S 1.062108119218227 0.3283056736926891 2.381884865749365 
        O -2.805242451920695 0.2804921986648666 -1.913339544625526 
        O -3.512045417775107 0.3716306732865399 0.5158047468180016 
        O 0.7567478015191106 -0.1792903772115996 -2.984706299237436 
        O 2.76479561769673 -0.1396171002653368 -1.432144949339409 
        O 0.1306136376080098 0.3085314131724992 3.471861228561079 
        O 2.479035317711195 0.4903574382522695 2.513549092828255 
        H -0.918427269382264 -1.444373511581261 -2.070395480805449 
        H -0.6945231511745352 -2.796332766722968 -0.9614264446063104 
        H 2.419925153472216 -1.521286787262407 0.2569356802154179 
        H 1.295695297606815 -2.885532812974936 0.3164309090632643 
        H -1.08426303008133 -1.628891819012519 2.316564829296158 
        H -0.2828416717697342 -3.146378513894692 1.822844767568445 
        H -0.5058342953491651 2.98497684327734 -1.322538209750381 
        H -0.8662670470660232 1.548141365133271 -2.293252640469876 
        H 1.382722665270868 2.937412124902142 0.2499744789675551 
        H 2.425402026815298 1.507171635644155 0.3119418676265199 
        H -0.9404109741853877 2.787987616782899 1.243890026225525 
        H -1.525379295628101 1.224495665555886 1.831705891982887 
        H -2.466079300616392 -1.895912019957761 0.0657242689365567 
    End
    Charge 1.0
    BondOrders
         1 2 1.0
         2 3 1.0
         4 11 1.0
         5 6 1.0
         5 12 1.0
         7 8 1.0
         7 19 1.0
         7 40 1.0
         8 9 1.0
         8 28 1.0
         8 29 1.0
         9 10 1.0
         9 20 1.0
         10 11 1.0
         10 30 1.0
         10 31 1.0
         11 12 1.0
         11 21 1.0
         12 32 1.0
         12 33 1.0
         13 14 1.0
         13 18 1.0
         13 19 1.0
         14 15 1.0
         14 34 1.0
         14 35 1.0
         15 16 1.0
         15 20 1.0
         16 17 1.0
         16 36 1.0
         16 37 1.0
         17 18 1.0
         17 21 1.0
         18 38 1.0
         18 39 1.0
         19 22 2.0
         19 23 2.0
         20 24 2.0
         20 25 2.0
         21 26 2.0
         21 27 2.0
    End
End

Engine ADF
    Basis
        Type TZP
        Core None
    End
    XC
        Hybrid B3LYP
    End
    Relativity
        Level None
    End
EndEngine
eor


########
#do not change the rest of the file!
########

mv $JOB.results/ams.log $JOB.logfile
rm slurm-*.out

EOF_ALL

sbatch < $JOB.sbatch
